name: Compile Sketch & lint check

on:
  - push
  - pull_request

jobs:
  compile-sketch:
    runs-on: ubuntu-latest

    steps:
        - uses: actions/checkout@v3
        - uses: arduino/compile-sketches@v1
          with:
            libraries: |
              - name: autowp-mcp2515
              - source-path: ./
        - uses: arduino/arduino-lint-action@v1
          with:
            library-manager: update
            compliance: strict
